<Window x:Class="GeradorListaAssados.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GeradorListaAssados.Desktop"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="1200"
        WindowState="Maximized"
        ResizeMode="NoResize">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="489"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- COLUNA ESQUERDA (0) -->
        <Label Content="Gerador Lista Assados" HorizontalAlignment="Center" Margin="0,10,0,0" VerticalAlignment="Top" FontSize="24" FontWeight="Bold" RenderTransformOrigin="0.511,-0.287" Height="42" Width="257"/>
        <Button x:Name="btnGenerateFile" Content="Gerar Excel" HorizontalAlignment="Center" Margin="0,348,0,0" VerticalAlignment="Top" Width="257" Height="30" FontSize="18" FontWeight="Bold" Background="#FF6DFF42" Click="btnGenerateFile_Click"/>
        <Rectangle
            Grid.Column="1"
            Width="1"
            Fill="Black"
            Margin="0,20,0,20"
            HorizontalAlignment="Left"
            VerticalAlignment="Stretch"/>
        <Label x:Name="lblDate" Content="26/01/2026" HorizontalAlignment="Center" Margin="0,46,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.183,-0.918" FontSize="16" Height="31" Width="257"/>
        <Button x:Name="btnOpenPathPicker" Content="Selecione o Local" HorizontalAlignment="Center" Margin="0,181,0,0" VerticalAlignment="Top" Width="257" Height="27" FontSize="18" FontWeight="Bold" Background="#FF42C8FF" Click="BtnOpenPathPicker_Click"/>
        <Label x:Name="label1" Content="Selecione o local para salvar o&#xD;&#xA;arquivo." HorizontalAlignment="Center" Margin="0,114,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.183,-0.918" FontSize="16" Height="61" Width="257"/>
        <Label x:Name="lblSelectedPath" HorizontalAlignment="Center" Margin="0,213,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.183,-0.918" FontSize="12" Height="130" Width="257"/>

        <!-- COLUNA DIREITA (1) -->
        <Grid Grid.Column="1" Margin="60,40,60,30">
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <!-- Título -->
                <RowDefinition Height="Auto"/>
                <!-- Botão -->
                <RowDefinition Height="*"/>
                <!-- Lista -->
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Content="Produtos" HorizontalAlignment="Center" FontWeight="Bold" FontSize="20"/>
            <Button x:Name="btnAddProduct" 
                    Grid.Row="1" 
                    Content="Adicionar" 
                    HorizontalAlignment="Right" 
                    Height="30" 
                    Width="107" 
                    Margin="0,0,40,12"
                    Background="#FF00ACFF" 
                    Click="BtnAddProduct_Click"/>
            <ScrollViewer
                Grid.Row="2"
                VerticalScrollBarVisibility="Auto"
                HorizontalScrollBarVisibility="Disabled">
                <ItemsControl 
                    x:Name="itemControlsProducts"
                    ItemsSource="{Binding Products}">

                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border
                            Width="592"
                            Height="100"
                            Margin="0,0,0,12"
                            BorderBrush="Black"
                            BorderThickness="1"
                            CornerRadius="8">

                                <Grid Margin="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <!-- Info do produto -->
                                    <StackPanel>
                                        <TextBlock
                                        Text="{Binding Name}"
                                        FontWeight="Bold"
                                        FontSize="18"/>

                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock
                                            Text="{Binding Price, StringFormat=R$ {0:F2}}"
                                            FontSize="16"/>

                                            <TextBlock
                                            Text="{Binding Quantity, StringFormat=Qtde: {0}}"
                                            FontSize="16"
                                            Margin="12,0,0,0"/>

                                            <TextBlock
                                            Text="{Binding Index, StringFormat=Indice: {0}}"
                                            FontSize="16"
                                            Margin="12,0,0,0"/>

                                            <Rectangle
                                            Width="20"
                                            Height="20"
                                            Fill="{Binding HexCodeColor}"
                                            Stroke="Black"
                                            Margin="12,0,0,0"/>
                                        </StackPanel>

                                    </StackPanel>

                                    <!-- Ações -->
                                    <StackPanel Grid.Column="1" HorizontalAlignment="Right">

                                        <Button
                                        Content="Editar"
                                        Background="#FFE9FF00"
                                        Command="{Binding DataContext.EditProductCommand,
                                                    RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                        CommandParameter="{Binding}"
                                        Margin="0,6,0,0"
                                        Height="28"
                                        Width="64"/>

                                        <Button
                                        Content="Deletar"
                                        Background="Red"
                                        Command="{Binding DataContext.DeleteProductCommand,
                                                    RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                        CommandParameter="{Binding}"
                                        Margin="0,4,0,0"
                                        Height="28"
                                        Width="64"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
            
        </Grid>
    </Grid>
</Window>
